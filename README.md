# 仮想合成人口個票の簡易な実装を用いた感染症シミュレーション (2025年8月版)

<!-- Time-stamp: "2025-08-05T06:38:28Z" -->

## 大目的

↓を使った感染症シミュレーションを作る。

《JRF-2018/simple_synthetic_population: 仮想合成人口個票の簡易な実装》  
https://github.com/JRF-2018/simple_synthetic_population

## ファイル

Gemini CLI を使って Gemini 2.5 Pro さんに作成していただきました。`v0.1` ディレクトリにあるのがその最初の試みで、`v0.2` ディレクトリにあるのが完成版です。`GEMINI.md` も付けましたので、参考にしていただければと思います。`v0.2` の完成には `GEMINI.md` 以外にも結構指示を出してます。その様子は `WORKING.md` に多少残っています。

メインのファイルは `infection_simulation.ipynb` になります。`REPORT.md` などを反映していて、これのみで今回の結果と言えます。ただしプログラム的には `v0.2/infection_simulation.py` を ipynb にしただけです。


## どういうシミュレーションにしたかったか？

  * simple_syntetic_population の Person や Family を拡張し、職業や所属する組織などをよい感じに設定する。時間経過でどの組織に参加しているかが変わる中で、ある感染症がどのように広がるかをシミュレーションする。

  * 個人には、いくつかモードがあり、少なくともオンモードとオフモードがある。自己隔離中はオフモードになる。オンモードには生活史があり、それは組織移動にある。組織は組織人数(実構成員)と組織内感染度と全体感染度のパラメータを持つ。

  * 例えば、学校はクラスが最大30人とし、高い組織内感染度を持つ。また、全校に対する全体感染度を持つ。全校といっても全人口と接触するわけではないが、それは単純化して全人口と接触するとモデル化する。

  * 1時間単位でシミュレーションする。大人の一例は満員電車に乗って通勤し、組織(会社)に属し、夜の街(組織内感染度低いが全体感染度高い)に行って家に帰る…とする。

  * 大人男性と一部女性の組織の人数はポワソン分布でいいかな？ リタイアした人と主婦は感染しにくい感じで。この辺、イイ感じにパラメータを設定する。

  * シミュレーション実行後、次の段階として CmdStanPy で SIR モデルとマッチングし、R0 や R(t) を計算する。

Gemini さんによってだいたいそのようなシミュレーションになりました。


## 今後の課題と判断

*   **パラメータとスケジュールの精緻化**:
    *   各場所の感染確率や、個人のスケジュールパターンは、現在簡易的な設定です。より現実のデータ（例：交通調査、行動ログ）に基づいてこれらのパラメータを調整することで、シミュレーションの精度を高めることができます。
    *   主婦やリタイアした人々の行動モデルは現在実装されていないため、今後の拡張が望まれます。
*   **モデルの拡張**: 全校集会や、異なる会社間の会議など、スケジュールにないランダムな接触イベントを追加することも、より現実的なシミュレーションへの拡張として考えられます。
*   **Stanモデルとの適合性**: 現在のシミュレーションは自己隔離などの複雑な要素を含むため、単純なSIRモデルとは乖離が見られる場合があります。Stanの実行時に発散（divergent transitions）が警告される場合、シミュレーションの動態が単純なSIRモデルの仮定から外れていることを示唆しており、それ自体が分析上の知見となります。

以上が Gemini さん自身による今後の課題になります。私の課題としては次のような感じです。

* これだけ精緻なシミュレーションにしたのだから、もっといろんな適用範囲を見つけたい。大日康史＆菅原民枝『パンデミック・シミュレーション - 感染症数理モデルの応用』(技術評論社 tanQブックス, 2009年8月)によれば、初発者からの広がりにおいて、その初発者がどういう人物かによって広がり方が違い、対策として例えば抗ウィルス薬(タミフルなど)の予防によって封じ込めが行える…等のシミュレーションができ…たりするようなのですが、今後の課題としておきます。


## 著者

JRF ( http://jrf.cocolog-nifty.com/statuses , Twitter (X): @jion_rockford )

## ライセンス

基本的に私が作ったのは仕様のみでプログラムは Gemini CLI で Gemini 2.5 Pro さんにお願いしました。私がやったのは .py としてできたファイルを .ipynb にしたぐらいです。それでも私にライセンスが発行できるなら、MIT License で。


----
(This document is mainly written in Japanese/UTF8.)
